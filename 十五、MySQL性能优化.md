# 性能优化

## 优化简介
* 优化文件系统，提高磁盘的I/O读写速度
* 优化操作系统调度策略，提高MySQL的负载能力
* 优化表结构，提高查询响应
* show status like 'value';查看性能参数
![](pictures/查询性能参数.png)

## 优化查询

### 分析查询语句

* explain \[extend] select * ...;查看查询语句的执行情况

### 使用索引提高查询语句
合理的使用索引可以提高查询速度。
* 使用索引查询时，like查询时只有"x%'会触发索引，而'%x'不会触发索引
* 多列索引时，只有用到了第一个字段的查询才会触发索引
* 使用or关键字的查询时，只有前后两个地方都用到索引字段时才会触发索引

### 优化子查询
子查询时会对嵌套的子查询建立一个临时表，这样会影响查询效率，可以使用连接来代替子查询提高查询效率。

## 优化数据库结构

### 将字段很多的表分解为多个表
对于字段很多的表，如果有些字段使用的频率很低，可以将这些字段分离出来形成新表。

### 增加中间表
对于需要经常联合查询的表，可以建立中间表提高查询效率，直接查询中间表。

### 增加冗余字段
当经常需要连接查询时，可以考虑在表中增加冗余字段，这样可以不用连接查询。

### 优化插入记录的速度
如果插入大量数据，建立索引会降低插入记录的速度，可以在插入之前禁用索引，插入之后重新开启索引
* alter table table_name disable keys;
* alter table table_name enable keys;

禁用唯一性检查，插入数据时，MySQL会对插入的数据进行唯一性检查，这种效验也会降低插入记录的速度
* set unique_check=0;
* set unique_check=1;
* set foreign_key_checks=0;
* set foreign_key_checks=1;

批量插入比一条一条插入更高效。

使用load data infile批量导入

### 分析表、检查表和优化表
* analyze table tb_name;分析表
* check table tb_name;
* optimize table tb_name;只对carchar/blob/text类型的字段有效

## 优化MySQL服务器
优化MySQL服务器主要从两个方面来优化，一方面是硬件优化，另一方面是对mysql的参数进行优化。



